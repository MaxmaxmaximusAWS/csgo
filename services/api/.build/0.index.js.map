{"version":3,"sources":["webpack:///./actions/sendMessage.js","webpack:///./app.js","webpack:///./hasuraAuthMiddleware.js"],"names":[],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAwB;;AAExB,4CAAG;;AAEH;AACA;AACA;;;AAGA;AACA;AACA,GAAG;AACH,CAAC;;AAED;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6B;AACW;AACJ;AACqB;;AAEzD;AACA,YAAY,8CAAO;;AAEnB,QAAQ,oDAAY;AACpB,QAAQ,kDAAU;AAClB;;;AAGA;AACA;AACA,wDAAwD,OAAO;AAC/D,CAAC;;;AAGc,kEAAG;;;;;;;;;;;;;;ACnBlB;AAAA;AAAe;AACf;AACA;AACA;AACA;AACA","file":"0.index.js","sourcesContent":["import app from \"../app\"\r\n\r\napp.post('/sendMessage', (req, res) => {\r\n\r\n  console.log('ACTION sendMessage:')\r\n  console.log(req.headers)\r\n  console.log(req.body)\r\n\r\n\r\n  res.json({\r\n    text: 'MY TEXT 33',\r\n  })\r\n})\r\n\r\nconsole.log(11)\r\n","import express from 'express'\r\nimport cookieParser from 'cookie-parser'\r\nimport bodyParser from 'body-parser'\r\nimport hasuraAuthMiddleware from './hasuraAuthMiddleware'\r\n\r\nconst PORT = process.env.PORT\r\nconst app = express()\r\n\r\napp.use(cookieParser())\r\napp.use(bodyParser.json())\r\n// app.use()\r\n\r\n\r\napp.listen(PORT, (error) => {\r\n  if (error) return console.error(error)\r\n  console.log(`Api server started on http://localhost:${ PORT }`)\r\n})\r\n\r\n\r\nexport default app\r\n\r\n","export default function hasuraAuthMiddleware(req, res, next) {\r\n  const requiredSecret = req.headers['x-hasura-action-secret']\r\n  const providedSecret = process.env.HASURA_GRAPHQL_ACTION_SECRET\r\n  if (requiredSecret === providedSecret) next();\r\n  else res.sendStatus(403);\r\n}\r\n"],"sourceRoot":""}