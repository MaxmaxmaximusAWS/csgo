{"ast":null,"code":"var _jsxFileName=\"C:\\\\localhost\\\\csshot\\\\services\\\\web\\\\components\\\\RefsPage\\\\RefsPage.js\";import React from\"react\";var __jsx=React.createElement;import Page from\"../Widgets/Page\";import{useState}from\"react\";import Button from\"../Widgets/Button\";import{useQuery,useSubscription,useMutation,useApolloClient}from'@apollo/react-hooks';const GET_MESSAGES_SUB={\"kind\":\"Document\",\"definitions\":[{\"kind\":\"OperationDefinition\",\"operation\":\"subscription\",\"variableDefinitions\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"message\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"text\"},\"arguments\":[],\"directives\":[]}]}}]}}],\"loc\":{\"start\":0,\"end\":62,\"source\":{\"body\":\"\\n  subscription {\\n    message {\\n      id\\n      text\\n    }\\n  }\\n\",\"name\":\"GraphQL request\",\"locationOffset\":{\"line\":1,\"column\":1}}}};const DELETE_MESSAGE={\"kind\":\"Document\",\"definitions\":[{\"kind\":\"OperationDefinition\",\"operation\":\"mutation\",\"variableDefinitions\":[{\"kind\":\"VariableDefinition\",\"variable\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"}},\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"Int\"}}},\"directives\":[]}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"delete_message_by_pk\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"value\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"}}}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"__typename\"},\"arguments\":[],\"directives\":[]}]}}]}}],\"loc\":{\"start\":0,\"end\":89,\"source\":{\"body\":\"\\n  mutation ($id: Int!) {\\n    delete_message_by_pk(id: $id) {\\n      __typename\\n    }\\n  }\\n\",\"name\":\"GraphQL request\",\"locationOffset\":{\"line\":1,\"column\":1}}}};function DeleteButton({id}){const[deleteMessage,status]=useMutation(DELETE_MESSAGE);return __jsx(Button,{onClick:()=>{deleteMessage({variables:{id:id}});},__self:this,__source:{fileName:_jsxFileName,lineNumber:31,columnNumber:10}},\"Delete \",id);}export default function RefsPage(){const{loading,error,data}=useSubscription(GET_MESSAGES_SUB);if(loading||error)return __jsx(\"div\",{__self:this,__source:{fileName:_jsxFileName,lineNumber:41,columnNumber:32}},\"Loading...\");return __jsx(Page,{__self:this,__source:{fileName:_jsxFileName,lineNumber:44,columnNumber:10}},__jsx(\"ul\",{__self:this,__source:{fileName:_jsxFileName,lineNumber:45,columnNumber:5}},data.message.map(message=>__jsx(\"li\",{key:message.id,__self:this,__source:{fileName:_jsxFileName,lineNumber:47,columnNumber:9}},__jsx(DeleteButton,{id:message.id,__self:this,__source:{fileName:_jsxFileName,lineNumber:48,columnNumber:11}}),message.text))));}","map":{"version":3,"sources":["C:/localhost/csshot/services/web/components/RefsPage/RefsPage.js"],"names":["Page","useState","Button","useQuery","useSubscription","useMutation","useApolloClient","GET_MESSAGES_SUB","DELETE_MESSAGE","DeleteButton","id","deleteMessage","status","variables","RefsPage","loading","error","data","message","map","text"],"mappings":"gJACA,MAAOA,CAAAA,IAAP,KAAiB,iBAAjB,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CAGA,OACEC,QADF,CACYC,eADZ,CAC6BC,WAD7B,CAC0CC,eAD1C,KAEO,qBAFP,CAKA,KAAMC,CAAAA,gBAAgB,2qBAAtB,CASA,KAAMC,CAAAA,cAAc,s8BAApB,CAQA,QAASC,CAAAA,YAAT,CAAsB,CAACC,EAAD,CAAtB,CAA4B,CAC1B,KAAM,CAACC,aAAD,CAAgBC,MAAhB,EAA0BP,WAAW,CAACG,cAAD,CAA3C,CACA,MAAO,OAAC,MAAD,EAAQ,OAAO,CAAG,IAAM,CAC7BG,aAAa,CAAC,CACZE,SAAS,CAAE,CAACH,EAAE,CAAEA,EAAL,CADC,CAAD,CAAb,CAGD,CAJM,uFAIMA,EAJN,CAAP,CAKD,CAED,cAAe,SAASI,CAAAA,QAAT,EAAoB,CAEjC,KAAM,CAACC,OAAD,CAAUC,KAAV,CAAiBC,IAAjB,EAAyBb,eAAe,CAACG,gBAAD,CAA9C,CACA,GAAIQ,OAAO,EAAIC,KAAf,CAAsB,MAAO,uGAAP,CAGtB,MAAO,OAAC,IAAD,8EACL,uFACIC,IAAI,CAACC,OAAL,CAAaC,GAAb,CAAiBD,OAAO,EACxB,YAAI,GAAG,CAAGA,OAAO,CAACR,EAAlB,4EACE,MAAC,YAAD,EAAc,EAAE,CAAGQ,OAAO,CAACR,EAA3B,6EADF,CAEIQ,OAAO,CAACE,IAFZ,CADA,CADJ,CADK,CAAP,CAUD","sourcesContent":["import css from 'styled-jsx/css'\r\nimport Page from \"../Widgets/Page\"\r\nimport { useState } from \"react\"\r\nimport Button from \"../Widgets/Button\"\r\nimport gql from 'graphql-tag'\r\n\r\nimport {\r\n  useQuery, useSubscription, useMutation, useApolloClient\r\n} from '@apollo/react-hooks'\r\n\r\n\r\nconst GET_MESSAGES_SUB = gql`\r\n  subscription {\r\n    message {\r\n      id\r\n      text\r\n    }\r\n  }\r\n`\r\n\r\nconst DELETE_MESSAGE = gql`\r\n  mutation ($id: Int!) {\r\n    delete_message_by_pk(id: $id) {\r\n      __typename\r\n    }\r\n  }\r\n`\r\n\r\nfunction DeleteButton({id}) {\r\n  const [deleteMessage, status] = useMutation(DELETE_MESSAGE)\r\n  return <Button onClick={ () => {\r\n    deleteMessage({\r\n      variables: {id: id},\r\n    })\r\n  } }>Delete { id }</Button>\r\n}\r\n\r\nexport default function RefsPage() {\r\n\r\n  const {loading, error, data} = useSubscription(GET_MESSAGES_SUB)\r\n  if (loading || error) return <div>Loading...</div>\r\n\r\n\r\n  return <Page>\r\n    <ul>\r\n      { data.message.map(message => (\r\n        <li key={ message.id }>\r\n          <DeleteButton id={ message.id }/>\r\n          { message.text }\r\n        </li>\r\n      )) }\r\n    </ul>\r\n  </Page>\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}
